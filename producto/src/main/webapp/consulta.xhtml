<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
   template="/WEB-INF/templates/default.xhtml">
   <ui:define name="content">
      <h1>Gestión de la Tienda de Productos T1</h1>
      <p>Consulta Productos</p>

      <h:form id="frmConsultarInventario">
         <h2>Ingrese el tipo producto</h2>
        
         <table>
            <tr>
               
               <td>
                  <h:outputLabel for="cmbTipoProducto" value="Tipo Producto:"/>
                  
               </td>
                <td>
                   <h:selectOneMenu id="cmbTipoProducto"
							value="#{consultaInventarioControlador.codigoTipoProducto}" 
							 
							>
							 <f:selectItem itemValue="#{null}" />
							<f:selectItems
								value="#{consultaInventarioControlador.listaTipoProductos}" var="c"
								itemLabel="#{c.descripcion}" itemValue="#{c.codigoTipoProducto}" >
								
							</f:selectItems>
							<f:ajax event="change" update="@this" />
						</h:selectOneMenu>
					 
						</td>
            </tr>
           
         </table>
         <p>  #{consultaInventarioControlador.codigoTipoProducto}
				<h:commandButton value="Consultar" type="submit" action="#{consultaInventarioControlador.consultar()}" immediate="true">
					<f:param name="codigoTipoProducto" value="#{consultaInventarioControlador.codigoTipoProducto}" />
				</h:commandButton>
				
				

				<h:outputText value=" All clear!" rendered="#{facesContext.postback and empty facesContext.messageList}" style="color: green;"/>
         </p>
         
      
      <h2>Resultados</h2>
      <h:dataTable var="producto" value="#{consultaInventarioControlador.listaProductos}" id="tblInventario" >
         <h:column>
            <f:facet name="header">Código</f:facet>
            #{producto.codigoProducto}
         </h:column>
         <h:column>
            <f:facet name="header">Descripción</f:facet>
            #{producto.descripcion}
         </h:column>
         <h:column>
            <f:facet name="header">Cantidad</f:facet>
            #{producto.cantidad}
         </h:column>
         <h:column>
            <f:facet name="header">Tipo</f:facet>
            #{producto.tipoProducto.descripcion}
         </h:column>
         <h:column>
				<h:commandLink
					action="#{consultaInventarioControlador.modificarProducto()}"
					value="Modificar Inventario">
					<f:param name="codigoProducto" value="#{producto.codigoProducto}" />
					
				</h:commandLink>
			</h:column>
      </h:dataTable>
      
      
       
      <h:commandButton value="Ingresar Producto"  action="#{consultaInventarioControlador.crearProducto()}" immediate="true">
					
	 </h:commandButton>
	 
	  </h:form>
      
   </ui:define>
</ui:composition>
